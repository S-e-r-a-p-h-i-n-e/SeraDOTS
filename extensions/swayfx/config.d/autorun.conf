#  █▀ ▀█▀ ▄▀█ █▀█ ▀█▀ █░█  █▀█ █▀
#  ▄█ ░█░ █▀█ █▀▄ ░█░ █▄█  █▀▀ ▄█

# --- Core System & Environment ---
# Essential for apps to know they are in a Wayland session (DO NOT TOUCH)
exec_always --no-startup-id sh -c '. "$HOME/.config/YASD/env/env.sh"'
exec dbus-update-activation-environment --all WAYLAND_DISPLAY XDG_CURRENT_DESKTOP=sway

# Authentication Agent (Polkit)
# Needed for GUI apps to ask for passwords (like GParted or Thunar)
exec /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
exec /usr/libexec/polkit-gnome/polkit-gnome-authentication-agent-1

# --- UI & Theming ---
# Status Bar (Reloads automatically when config changes)
exec waybar
exec autotiling

# Cursor Theme
# Replaces 'hyprctl setcursor'
seat seat0 xcursor_theme Bibata-Modern-Ice 24

# Notifications
# 'swaync' is the standard for Sway, but 'mako' works too if you have it installed and want something simpler than swaync.
# exec mako
exec swaync

# --- Clipboard Manager ---
# Stores text and images for cliphist/rofi
exec wl-paste --type text --watch cliphist store
exec wl-paste --type image --watch cliphist store

# --- System Tray Apps ---
exec nm-applet; nm-applet --indicator
exec blueman-applet; blueman-applet
exec udiskie; udiskie --tray

# --- Idle Daemon (Swayidle) ---
# Replaces hypridle.
# 1. Locks screen after 5 mins (300s)
# 2. Turns off screens after 10 mins (600s)
# 3. Locks screen instantly before sleep (lid close)
# NOTE: This looks ugly as hell but backslashes to make it cleaner doesn't work so its a single line instead
exec swayidle -w timeout 300 'swaylock' timeout 600 'swaymsg "output * dpms off"' resume 'swaymsg "output * dpms on"' before-sleep 'swaylock -f -c 000000'

# --- Wallpaper ---
exec swww-daemon